# 開発メモ（自動提案用）

最終更新: 自動APIが初回読み込み時に `.data/dev-notes.json` へコピーします。

## 進捗（要約）
- 動画アップロード再生不可（0秒）修正: ffmpeg/ffprobe 導入、Range対応強化、media routeをNode固定
- Yahoo!ニュース: iframe不可ドメインは本文抽出＋引用リンクに自動フォールバック
- 文化人放送局ほか保守系YouTubeの自動投稿土台を追加（/api/cron/auto-news）
- 管理UI（/admin/console）に機能追加:
  - 投稿一覧（検索＋一括 非公開/再公開/削除）
  - NGワード管理（一覧・追加/削除・テスト、基準セット投入）
  - アンチ投稿スキャン（実行・一覧、ボタン有効化）
- Instagram埋め込みの安定化（一覧側でも確実に表示）

## 補足・運用
- ランタイムエラー `Cannot find module './5611.js'` は、dev:patched / start:patched を使用（ランタイムパッチ適用）
- CRON_SECRET を設定して /api/cron/auto-news を1時間に1回程度実行（1時間内に運営YouTube投稿があればスキップ）

## 次にやること（提案）
1) 自動投稿（キーワード）を本稼働に拡張
   - 管理UIからのキーワード一覧/追加/削除は組み込み済み（ファイル保存版）。DB化・間隔制御の適用・ログ可視化を追加
   - 会員限定/埋め込み不可サイトは除外（ドメイン除外＋ /api/can-embed 判定）
2) 解析のグラフ化（PV/共感/シェアを簡易チャートで表示）
3) モデレーション一覧からの一括 非公開/削除 UI
4) /admin への middleware 追加（Cookie未所持時の遮断・IP許可）

## キーワード初期セット（提案）
- 外国人犯罪
- 迷惑外国人
- 尖閣諸島
- 竹島
- 帰化人議員
- 媚中派議員
- 反日行為
- セイレントインベイジョン
- 財務省解体

必要であれば、このリストをそのまま自動投稿（キーワード）の初期投入として登録します。

